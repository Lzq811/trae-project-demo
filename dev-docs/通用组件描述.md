# 通用组件与样式规范描述

本文档根据 UI 设计图及项目需求，定义了 Web 端项目的通用样式、基础组件及组合组件规范。所有组件开发应遵循 Vue 3 + TypeScript + Element Plus 的技术栈标准。

## 1. 通用样式 (Global Styles)

在 `src/assets/styles` 目录下管理全局样式，通过 `base.less` 统一导出。

### 1.1 样式变量 (Variables)

需定义 Less 变量以统一项目风格（参考 UI 图）：

- **主色调**: `@primary-color` (如 UI 中的蓝色 #1890FF)
- **文本色**:
  - `@text-primary`: 主要文字 (#303133)
  - `@text-regular`: 常规文字 (#606266)
  - `@text-secondary`: 次要文字/占位符 (#909399)
- **边框/背景**:
  - `@border-color`: 边框颜色 (#DCDFE6)
  - `@bg-color-page`: 页面背景色 (#F0F2F5)
  - `@bg-color-block`: 内容块背景色 (#FFFFFF)

### 1.2 布局规范

- **版心宽度**: 最小宽度 `1280px`，小于此宽度出现横向滚动条。
- **间距**: 统一使用变量 `@spacing-small` (8px), `@spacing-medium` (16px), `@spacing-large` (24px)。

---

## 2. 基础组件 (Base Components)

> **目录说明**: 所有基础组件直接位于 `src/components/` 目录下，与 `Layout` 组件同级，文件夹命名格式为 `c-{name}`。

### 2.1 布局与容器

- **c-container (页面容器)**
  - **功能**: 统一页面内边距和背景色。
  - **Props**:
    - `type`: `'full'` (铺满) | `'card'` (卡片式，带白色背景和 padding) | `'ghost'` (透明背景)。
  - **UI 特征**: 对应 UI 图中白色背景的内容区域。

- **c-card (卡片组件)**
  - **功能**: 用于通过白色卡片包裹内容块。
  - **Props**: `title` (标题), `extra` (右侧操作区插槽)。

- **c-drawer (抽屉封装)**
  - **功能**: 侧边滑出的详情/表单容器，替代部分 Dialog 场景（如员工详情、角色详情）。
  - **Props**: `modelValue` (v-model), `title`, `size`, `loading`.
  - **Slots**: `default` (内容), `footer` (底部操作区).

### 2.2 导航与展示

- **c-title (标题组件)**
  - **功能**: 对应 UI 详情页/表单页中的分块标题。
  - **UI 特征**: 左侧带有主色调竖线装饰 (Border-left)，字体加粗。
  - **Slots**: `default` (标题文本), `extra` (右侧按钮区), `desc` (标题旁的辅助描述)。

- **c-anchor (侧边锚点导航)**
  - **功能**: 对应 UI 详情/表单页左侧的悬浮导航。
  - **特性**:
    - 自动监听页面滚动，高亮当前所在区块。
    - 点击菜单平滑滚动到对应内容块。
  - **Props**: `items` (锚点列表: `{ label: string, target: string }[]`).

- **c-status-tag (状态标签)**
  - **功能**: 统一管理列表页/详情页的状态展示。
  - **Props**: `status` (状态值), `map` (状态映射表: `{ value: { label, color/type } }`).
  - **UI 特征**: 对应列表页“审核状态”、“上下架状态”的 Tag 或圆点展示。

- **c-empty (无数据)**
  - **功能**: 数据为空时的占位展示。
  - **Props**: `description` (提示文案), `image` (图片类型)。

### 2.3 数据输入与反馈

- **c-upload (上传组件)**
  - **功能**: 封装文件/图片上传。
  - **UI 特征**: 对应新增页中的图片上传卡片（如新增软著信息、新增员工信息）。
  - **Props**: `limit` (数量限制), `accept` (文件类型), `size` (大小限制 MB)。
  - **特性**: 支持预览、删除、超限提示。

- **c-dialog (弹窗封装)**
  - **功能**: 统一弹窗样式（头部、底部按钮布局）。
  - **Props**: `visible` (v-model), `title`, `width`, `confirmLoading`.
  - **场景**: 停用/启用弹窗、简单的批量操作确认。

- **c-audit-dialog (审核/驳回弹窗)**
  - **功能**: 专门用于审核流程的弹窗，包含“通过/驳回”选项及“驳回原因”输入框。
  - **UI 特征**: 对应“驳回说明.png”、“批量审核弹出框.png”。
  - **Props**: `visible`, `type` ('batch' | 'single'), `rows` (批量操作时的选中行)。
  - **特性**: 驳回时必填驳回原因。

- **c-icon-picker (图标选择器)**
  - **功能**: 用于菜单配置或系统设置中的图标选择。
  - **Props**: `modelValue`.
  - **特性**: 支持搜索，展示 Element Plus 图标集合。

### 2.4 图表

- **c-chart-card (图表卡片)**
  - **功能**: 封装 ECharts 及外层 Card 结构，包含标题、日期筛选等通用功能。
  - **UI 特征**: 对应“会员数量统计报表”、“设备统计报表”、“科研人才结构分析”。
  - **Props**: `title`, `options` (ECharts 配置), `loading`.
  - **Slots**: `filter` (右上角筛选区，如时间选择器)。

---

## 3. 组合/业务组件 (Business Components)

> **目录说明**: 所有业务/组合组件也直接位于 `src/components/` 目录下，与基础组件和 `Layout` 平级。

### 3.1 列表页套件

- **c-search-form (搜索表单)**
  - **功能**: 列表页顶部的筛选区域。
  - **UI 特征**: 多行表单，右下角包含“查询/重置”按钮，支持“收起/展开”高级筛选。
  - **Props**: `items` (表单配置项), `model` (表单数据)。
  - **Events**: `search`, `reset`, `collapse`.
  - **i18n**: 表单 Label 需支持国际化 key。

- **c-table-pro (高级表格)**
  - **功能**: 封装 Element Plus Table，集成工具栏和分页。
  - **Slots**:
    - `toolbar`: 表格上方的操作区（如“批量下载”、“新增”、“批量上下架”、“批量审核”）。
    - `columns`: 表格列定义。
  - **Props**:
    - `data`: 表格数据。
    - `pagination`: 分页配置对象（页码、页大小、总数）。
  - **Events**: `page-change`, `selection-change`.

- **c-table-tabs (表格页签)**
  - **功能**: 列表页顶部的状态切换 Tab。
  - **UI 特征**: 带数字 Badge 的 Tab 切换。

- **c-import-excel (Excel 导入)**
  - **功能**: 列表页常用的批量导入功能。
  - **Props**: `tempalteUrl` (模板下载地址), `uploadApi` (上传接口)。
  - **特性**: 支持拖拽上传，上传进度显示，结果反馈。

### 3.2 表单/详情页套件

- **c-info-form (信息录入表单)**
  - **功能**: 对应“新增科研人才”、“新增员工信息”等长表单页面。
  - **特性**:
    - 结合 `c-anchor` 实现锚点联动。
    - 区分 `mode` (新增/编辑/查看)。查看模式下渲染为纯文本。
    - **校验**: 集成 `src/utils/Rexp` 中的正则进行字段校验（如手机号、邮箱）。
  - **UI 特征**: 表单项包含输入框、选择器、日期、图片上传等。

- **c-dynamic-group (动态表单组)**
  - **功能**: 对应表单页中的“学历教育”、“工作经历”或“专利期限预警规则设置”等可增减行的表格/卡片。
  - **UI 特征**: 每一行是一组表单，底部有“+ 添加一行”按钮，行尾有“删除”按钮。

- **c-detail-desc (详情描述)**
  - **功能**: 详情页中的 key-value 展示块（如“人才信息详情”、“员工详情”）。
  - **UI 特征**: 两列或三列布局，展示字段名和字段值。

- **c-editor (富文本编辑器)**
  - **功能**: 用于公告发布、文章编辑等场景。
  - **Props**: `modelValue` (HTML 内容), `height`.
  - **特性**: 封装 Tinymce 或 WangEditor，集成图片上传到 OSS/服务器的逻辑。

- **c-permission-tree (权限树选择)**
  - **功能**: 角色管理中的权限分配组件。
  - **UI 特征**: 对应“添加-编辑角色.png”，展示菜单树，支持勾选（父子联动/不联动）。
  - **Props**: `data` (树形数据), `checkedKeys` (选中 ID 集合)。

- **c-tag-select (标签/属性选择器)**
  - **功能**: 对应“新增-属性标签”、“标签管理”中的标签选择或管理。
  - **特性**: 支持颜色选择、新增标签、标签分组展示。

---

## 4. 目录结构 (Directory Structure)

所有组件平铺在 `src/components/` 目录下，不再按 `base/` 或 `business/` 嵌套文件夹，以便于查找和引用。

```
src/
├── assets/
│   └── styles/
│       ├── base.less          # 全局样式入口
│       └── variables.less     # 样式变量
├── components/
│   ├── Layout/                # 布局组件 (Header, Menu)
│   ├── c-anchor/              # [基础] 锚点导航
│   ├── c-audit-dialog/        # [基础] 审核/驳回弹窗 (New)
│   ├── c-card/                # [基础] 卡片
│   ├── c-chart-card/          # [基础] 图表卡片容器 (New)
│   ├── c-dialog/              # [基础] 弹窗
│   ├── c-drawer/              # [基础] 抽屉
│   ├── c-editor/              # [业务] 富文本编辑器
│   ├── c-import-excel/        # [业务] Excel导入
│   ├── c-permission-tree/     # [业务] 权限树选择 (New)
│   ├── c-search-form/         # [业务] 搜索表单
│   ├── c-table-pro/           # [业务] 高级表格
│   ├── c-tag-select/          # [业务] 标签选择器 (New)
│   ├── c-title/               # [基础] 标题
│   ├── c-upload/              # [基础] 上传
│   └── ...                    # 其他组件 (平级存放)
└── views/                     # 页面
```

## 5. 开发规范

1.  **命名**: 组件文件夹和主文件使用 `kebab-case` 或 `PascalCase` 统一即可，建议文件夹使用 `c-component-name`，入口文件 `index.vue`。
    - 引用时使用 `<c-component-name>`.
2.  **全局注册**: 基础组件建议在 `main.ts` 中自动全局注册，业务组件按需引入。
3.  **类型定义**: 所有组件的 Props 和 Emits 必须使用 TypeScript 接口定义。
4.  **注释**: 每个组件顶部需包含组件功能描述、Props 说明、Slots 说明。
5.  **国际化 (i18n)**:
    - 组件内部文本严禁硬编码中文，必须使用 `t('key')`。
    - 这里的 `key` 应在 `src/locales` 中定义。
6.  **图标 (Icons)**:
    - 统一使用 `@element-plus/icons-vue`。
